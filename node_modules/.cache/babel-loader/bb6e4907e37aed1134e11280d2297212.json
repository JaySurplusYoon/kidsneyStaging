{"ast":null,"code":"var _jsxFileName = \"/Users/jay_yoon/Downloads/kidsneyStaging/src/Pages/ProductList/ProductList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport SorterBar from './Components/SorterBar/SorterBar';\nimport Aside from './Components/Aside/Aside';\nimport SearchItems from './Components/SearchItems/SearchItems';\nimport Pagination from './Components/Pagination/Pagination';\nimport { BASE_URL } from '../../config.js';\nimport './ProductList.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProductList = () => {\n  _s();\n\n  const location = useLocation();\n  const [products, setProducts] = useState([]);\n  const [subtotal, setSubtotal] = useState();\n  const [sorter, setSorter] = useState('');\n  const [pageNum, setPageNum] = useState('&offset=0&limit=6');\n  const [searchWord, setSearchWord] = useState('');\n  const LIMIT = 6;\n  const [url, setUrl] = useState(`${BASE_URL}` + location.pathname + location.search);\n  const [filters, setFilters] = useState(location.search.split('&')[1] ? [location.search.split('&')[1].split('=')[0] + ',' + location.search.split('&')[1].split('=')[1].replace('boy-', '').replace('girl-', '')] : []);\n  useEffect(() => {\n    fetch(`${BASE_URL}/products/search?product-name=${searchWord}`).then(response => response.json()).then(product => {\n      setProducts(product.result);\n      setSubtotal(product.count);\n    });\n  }, [searchWord]);\n  useEffect(() => {\n    fetch(url + sorter + pageNum).then(response => response.json()).then(product => {\n      setProducts(product.result);\n      setSubtotal(product.count);\n    });\n  }, [url, sorter, pageNum]);\n\n  const sorterHandler = e => {\n    setSorter(e.target.id && `&order-by=${e.target.id}`);\n  };\n\n  const pageHandler = e => {\n    setPageNum(`&offset=${(e.target.id - 1) * LIMIT}&limit=${LIMIT}`);\n  };\n\n  const handleFilter = (name, attr) => {\n    const filterArr = [...filters];\n    filterArr.includes(`${name},${attr}`) ? filterArr.splice(filterArr.indexOf(`${name},${attr}`), 1) : filterArr.push(`${name},${attr}`);\n    setFilters(filterArr);\n    setQueryStrings(filterArr);\n  };\n\n  const handleSearch = e => {\n    setSearchWord(e.target.value);\n  };\n\n  const setQueryStrings = filterArr => {\n    let queryString = '';\n    const addParamFilters = [];\n    const param = location.search.split('&')[0].replace('?main=', '');\n\n    if (filterArr) {\n      filterArr.forEach(filter => {\n        const splittedFilter = filter.split(`,`);\n\n        switch (splittedFilter[0]) {\n          case 'sub':\n            addParamFilters.push(`&sub=${param}-${splittedFilter[1]}`);\n            break;\n\n          case 'size':\n            addParamFilters.push(`&size=${splittedFilter[1]}`);\n            break;\n\n          case 'character':\n            addParamFilters.push(`&character=${splittedFilter[1]}`);\n            break;\n\n          default:\n        }\n      });\n      queryString = `${BASE_URL}${location.pathname}?main=${param}${addParamFilters.join('')}`;\n    } else {\n      queryString = `${BASE_URL}${location.pathname}${location.search}`;\n    }\n\n    setUrl(queryString);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"productList\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"https://i.ibb.co/sQ7D7XJ/001-14.png\",\n      alt: \"\\uBA54\\uC778\\uD504\\uB85C\\uBAA8\\uC158 \\uBC30\\uB108\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SorterBar, {\n      subtotal: subtotal,\n      sorterHandler: sorterHandler,\n      handleSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(Aside, {\n        filters: filters,\n        handleFilter: handleFilter,\n        products: products\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SearchItems, {\n        products: products\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n        subtotal: subtotal,\n        pageHandler: pageHandler,\n        LIMIT: LIMIT\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductList, \"8+oFSxepfaodR7FZ0tkgOV9lXgA=\", false, function () {\n  return [useLocation];\n});\n\n_c = ProductList;\nexport default ProductList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"sources":["/Users/jay_yoon/Downloads/kidsneyStaging/src/Pages/ProductList/ProductList.js"],"names":["React","useState","useEffect","useLocation","SorterBar","Aside","SearchItems","Pagination","BASE_URL","ProductList","location","products","setProducts","subtotal","setSubtotal","sorter","setSorter","pageNum","setPageNum","searchWord","setSearchWord","LIMIT","url","setUrl","pathname","search","filters","setFilters","split","replace","fetch","then","response","json","product","result","count","sorterHandler","e","target","id","pageHandler","handleFilter","name","attr","filterArr","includes","splice","indexOf","push","setQueryStrings","handleSearch","value","queryString","addParamFilters","param","forEach","filter","splittedFilter","join"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport SorterBar from './Components/SorterBar/SorterBar';\nimport Aside from './Components/Aside/Aside';\nimport SearchItems from './Components/SearchItems/SearchItems';\nimport Pagination from './Components/Pagination/Pagination';\nimport { BASE_URL } from '../../config.js';\nimport './ProductList.scss';\n\nconst ProductList = () => {\n  const location = useLocation();\n  const [products, setProducts] = useState([]);\n  const [subtotal, setSubtotal] = useState();\n  const [sorter, setSorter] = useState('');\n  const [pageNum, setPageNum] = useState('&offset=0&limit=6');\n  const [searchWord, setSearchWord] = useState('');\n  const LIMIT = 6;\n\n  const [url, setUrl] = useState(\n    `${BASE_URL}` + location.pathname + location.search\n  );\n  const [filters, setFilters] = useState(\n    location.search.split('&')[1]\n      ? [\n          location.search.split('&')[1].split('=')[0] +\n            ',' +\n            location.search\n              .split('&')[1]\n              .split('=')[1]\n              .replace('boy-', '')\n              .replace('girl-', ''),\n        ]\n      : []\n  );\n\n  useEffect(() => {\n    fetch(`${BASE_URL}/products/search?product-name=${searchWord}`)\n      .then(response => response.json())\n      .then(product => {\n        setProducts(product.result);\n        setSubtotal(product.count);\n      });\n  }, [searchWord]);\n\n  useEffect(() => {\n    fetch(url + sorter + pageNum)\n      .then(response => response.json())\n      .then(product => {\n        setProducts(product.result);\n        setSubtotal(product.count);\n      });\n  }, [url, sorter, pageNum]);\n\n  const sorterHandler = e => {\n    setSorter(e.target.id && `&order-by=${e.target.id}`);\n  };\n  const pageHandler = e => {\n    setPageNum(`&offset=${(e.target.id - 1) * LIMIT}&limit=${LIMIT}`);\n  };\n  const handleFilter = (name, attr) => {\n    const filterArr = [...filters];\n    filterArr.includes(`${name},${attr}`)\n      ? filterArr.splice(filterArr.indexOf(`${name},${attr}`), 1)\n      : filterArr.push(`${name},${attr}`);\n    setFilters(filterArr);\n    setQueryStrings(filterArr);\n  };\n  const handleSearch = e => {\n    setSearchWord(e.target.value);\n  };\n\n  const setQueryStrings = filterArr => {\n    let queryString = '';\n    const addParamFilters = [];\n    const param = location.search.split('&')[0].replace('?main=', '');\n    if (filterArr) {\n      filterArr.forEach(filter => {\n        const splittedFilter = filter.split(`,`);\n        switch (splittedFilter[0]) {\n          case 'sub':\n            addParamFilters.push(`&sub=${param}-${splittedFilter[1]}`);\n            break;\n\n          case 'size':\n            addParamFilters.push(`&size=${splittedFilter[1]}`);\n            break;\n\n          case 'character':\n            addParamFilters.push(`&character=${splittedFilter[1]}`);\n            break;\n\n          default:\n        }\n      });\n      queryString = `${BASE_URL}${\n        location.pathname\n      }?main=${param}${addParamFilters.join('')}`;\n    } else {\n      queryString = `${BASE_URL}${location.pathname}${location.search}`;\n    }\n    setUrl(queryString);\n  };\n  return (\n    <div className=\"productList\">\n      <img src=\"https://i.ibb.co/sQ7D7XJ/001-14.png\" alt=\"메인프로모션 배너\" />\n      <SorterBar\n        subtotal={subtotal}\n        sorterHandler={sorterHandler}\n        handleSearch={handleSearch}\n      />\n      <div className=\"row\">\n        <Aside\n          filters={filters}\n          handleFilter={handleFilter}\n          products={products}\n        />\n        <SearchItems products={products} />\n        <Pagination\n          subtotal={subtotal}\n          pageHandler={pageHandler}\n          LIMIT={LIMIT}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ProductList;\n"]},"metadata":{},"sourceType":"module"}